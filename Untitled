local BASE_WIDTH = 480
local BASE_HEIGHT = 480

local gameCanvas
local scaleX, scaleY = 1, 1
local offsetX, offsetY = 0, 0

function love.load()
    love.window.setMode(BASE_WIDTH, BASE_HEIGHT, {
        resizable = true,
        minwidth = BASE_WIDTH,
        minheight = BASE_HEIGHT,
        centered = true
    })

    gameCanvas = love.graphics.newCanvas(BASE_WIDTH, BASE_HEIGHT)

    love.graphics.setBackgroundColor(0, 0, 0)
    titleFont = love.graphics.newFont("fonts/spy-hunter-arcade.ttf", 32)
    titleText = "SPY HUNTER"

    updateScale(love.graphics.getWidth(), love.graphics.getHeight())
end

function love.resize(w, h)
    updateScale(w, h)
end

function updateScale(w, h)
    local scale = math.min(w / BASE_WIDTH, h / BASE_HEIGHT)
    scaleX = scale
    scaleY = scale
    offsetX = (w - BASE_WIDTH * scale) / 2
    offsetY = (h - BASE_HEIGHT * scale) / 2
end

function love.draw()
    love.graphics.setCanvas(gameCanvas)
    love.graphics.clear()
    love.graphics.setFont(titleFont)
    love.graphics.setColor(1, 1, 1)

    local textWidth = titleFont:getWidth(titleText)
    local textHeight = titleFont:getHeight()
    love.graphics.print(
        titleText,
        (BASE_WIDTH - textWidth) / 2,
        (BASE_HEIGHT - textHeight) / 2
    )

    love.graphics.setCanvas()

    love.graphics.setColor(1, 1, 1)
    love.graphics.draw(gameCanvas, offsetX, offsetY, 0, scaleX, scaleY)
end

function love.keypressed(key)
    if key == "escape" then
        love.event.quit()
    end
end
